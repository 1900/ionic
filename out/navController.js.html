<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: controllers/navController.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: controllers/navController.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>(function(ionic) {
'use strict';

/**
 * The NavController makes it easy to have a stack
 * of views or screens that can be pushed and popped
 * for a dynamic navigation flow. This API is modelled
 * off of the UINavigationController in iOS.
 *
 * The NavController can drive a nav bar to show a back button
 * if the stack can be poppped to go back to the last view, and
 * it will handle updating the title of the nav bar and processing animations.
 */
ionic.controllers.NavController = ionic.controllers.ViewController.inherit({
  initialize: function(opts) {
    var _this = this;

    this.navBar = opts.navBar;
    this.content = opts.content;
    this.controllers = opts.controllers || [];

    this._updateNavBar();

    // TODO: Is this the best way?
    this.navBar.shouldGoBack = function() {
      _this.pop();
    };
  },

  /**
   * @return {array} the array of controllers on the stack.
   */
  getControllers: function() {
    return this.controllers;
  },

  /**
   * @return {object} the controller at the top of the stack.
   */
  getTopController: function() {
    return this.controllers[this.controllers.length-1];
  },

  /**
   * Push a new controller onto the navigation stack. The new controller
   * will automatically become the new visible view.
   *
   * @param {object} controller the controller to push on the stack.
   */
  push: function(controller) {
    var last = this.controllers[this.controllers.length - 1];

    this.controllers.push(controller);

    // Indicate we are switching controllers
    var shouldSwitch = this.switchingController &amp;&amp; this.switchingController(controller) || true;

    // Return if navigation cancelled
    if(shouldSwitch === false)
      return;

    // Actually switch the active controllers
    if(last) {
      last.isVisible = false;
      last.visibilityChanged &amp;&amp; last.visibilityChanged('push');
    }

    // Grab the top controller on the stack
    var next = this.controllers[this.controllers.length - 1];

    next.isVisible = true;
    // Trigger visibility change, but send 'first' if this is the first page
    next.visibilityChanged &amp;&amp; next.visibilityChanged(last ? 'push' : 'first');

    this._updateNavBar();

    return controller;
  },

  /**
   * Pop the top controller off the stack, and show the last one. This is the
   * "back" operation.
   *
   * @return {object} the last popped controller
   */
  pop: function() {
    var next, last;

    // Make sure we keep one on the stack at all times
    if(this.controllers.length &lt; 2) {
      return;
    }

    // Grab the controller behind the top one on the stack
    last = this.controllers.pop();
    if(last) {
      last.isVisible = false;
      last.visibilityChanged &amp;&amp; last.visibilityChanged('pop');
    }
    
    // Remove the old one
    //last &amp;&amp; last.detach();

    next = this.controllers[this.controllers.length - 1];

    // TODO: No DOM stuff here
    //this.content.el.appendChild(next.el);
    next.isVisible = true;
    next.visibilityChanged &amp;&amp; next.visibilityChanged('pop');

    // Switch to it (TODO: Animate or such things here)

    this._updateNavBar();

    return last;
  },

  /**
   * Show the NavBar (if any)
   */
  showNavBar: function() {
    if(this.navBar) {
      this.navBar.show();
    }
  },

  /**
   * Hide the NavBar (if any)
   */
  hideNavBar: function() {
    if(this.navBar) {
      this.navBar.hide();
    }
  },

  // Update the nav bar after a push or pop
  _updateNavBar: function() {
    if(!this.getTopController() || !this.navBar) {
      return;
    }

    this.navBar.setTitle(this.getTopController().title);

    if(this.controllers.length > 1) {
      this.navBar.showBackButton(true);
    } else {
      this.navBar.showBackButton(false);
    }
  }
});

})(window.ionic);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Gesture.Instance.html">Instance</a></li><li><a href="ionic.Gesture.html">Gesture</a></li><li><a href="ionic.views.Scroll.html">Scroll</a></li></ul><h3>Global</h3><ul><li><a href="global.html#__clientHeight">__clientHeight</a></li><li><a href="global.html#__clientLeft">__clientLeft</a></li><li><a href="global.html#__clientTop">__clientTop</a></li><li><a href="global.html#__clientWidth">__clientWidth</a></li><li><a href="global.html#__computeScrollMax">__computeScrollMax</a></li><li><a href="global.html#__contentHeight">__contentHeight</a></li><li><a href="global.html#__contentWidth">__contentWidth</a></li><li><a href="global.html#__createScrollbar">__createScrollbar</a></li><li><a href="global.html#__decelerationVelocityX">__decelerationVelocityX</a></li><li><a href="global.html#__decelerationVelocityY">__decelerationVelocityY</a></li><li><a href="global.html#__didDecelerationComplete">__didDecelerationComplete</a></li><li><a href="global.html#__didWaitForSize">__didWaitForSize</a></li><li><a href="global.html#__indicatorX">__indicatorX</a></li><li><a href="global.html#__isAnimating">__isAnimating</a></li><li><a href="global.html#__isDecelerating">__isDecelerating</a></li><li><a href="global.html#__isDragging">__isDragging</a></li><li><a href="global.html#__isGesturing">__isGesturing</a></li><li><a href="global.html#__isSingleTouch">__isSingleTouch</a></li><li><a href="global.html#__isTracking">__isTracking</a></li><li><a href="global.html#__lastTouchLeft">__lastTouchLeft</a></li><li><a href="global.html#__lastTouchMove">__lastTouchMove</a></li><li><a href="global.html#__lastTouchTop">__lastTouchTop</a></li><li><a href="global.html#__maxDecelerationScrollLeft">__maxDecelerationScrollLeft</a></li><li><a href="global.html#__maxDecelerationScrollTop">__maxDecelerationScrollTop</a></li><li><a href="global.html#__maxScrollLeft">__maxScrollLeft</a></li><li><a href="global.html#__maxScrollTop">__maxScrollTop</a></li><li><a href="global.html#__minDecelerationScrollLeft">__minDecelerationScrollLeft</a></li><li><a href="global.html#__minDecelerationScrollTop">__minDecelerationScrollTop</a></li><li><a href="global.html#__positions">__positions</a></li><li><a href="global.html#__publish">__publish</a></li><li><a href="global.html#__refreshActivate">__refreshActivate</a></li><li><a href="global.html#__refreshActive">__refreshActive</a></li><li><a href="global.html#__refreshDeactivate">__refreshDeactivate</a></li><li><a href="global.html#__refreshHeight">__refreshHeight</a></li><li><a href="global.html#__refreshStart">__refreshStart</a></li><li><a href="global.html#__repositionScrollbars">__repositionScrollbars</a></li><li><a href="global.html#__scrollbarFadeTimeout">__scrollbarFadeTimeout</a></li><li><a href="global.html#__scrollLeft">__scrollLeft</a></li><li><a href="global.html#__scrollTop">__scrollTop</a></li><li><a href="global.html#__snapHeight">__snapHeight</a></li><li><a href="global.html#__snapWidth">__snapWidth</a></li><li><a href="global.html#__startDeceleration">__startDeceleration</a></li><li><a href="global.html#__stepThroughDeceleration">__stepThroughDeceleration</a></li><li><a href="global.html#__transformProperty">__transformProperty</a></li><li><a href="global.html#__waitForSize">__waitForSize</a></li><li><a href="global.html#__zoomLevel">__zoomLevel</a></li><li><a href="global.html#_handleDrag">_handleDrag</a></li><li><a href="global.html#_handleTouch">_handleTouch</a></li><li><a href="global.html#activatePullToRefresh">activatePullToRefresh</a></li><li><a href="global.html#align">align</a></li><li><a href="global.html#close">close</a></li><li><a href="global.html#didScroll">didScroll</a></li><li><a href="global.html#doMouseZoom">doMouseZoom</a></li><li><a href="global.html#doTouchEnd">doTouchEnd</a></li><li><a href="global.html#doTouchMove">doTouchMove</a></li><li><a href="global.html#doTouchStart">doTouchStart</a></li><li><a href="global.html#finishPullToRefresh">finishPullToRefresh</a></li><li><a href="global.html#fromTemplate">fromTemplate</a></li><li><a href="global.html#getControllers">getControllers</a></li><li><a href="global.html#getOpenAmount">getOpenAmount</a></li><li><a href="global.html#getOpenPercentage">getOpenPercentage</a></li><li><a href="global.html#getOpenRatio">getOpenRatio</a></li><li><a href="global.html#getScrollMax">getScrollMax</a></li><li><a href="global.html#getTopController">getTopController</a></li><li><a href="global.html#getValues">getValues</a></li><li><a href="global.html#hideNavBar">hideNavBar</a></li><li><a href="global.html#offHardwareBackButton">offHardwareBackButton</a></li><li><a href="global.html#onHardwareBackButton">onHardwareBackButton</a></li><li><a href="global.html#openAmount">openAmount</a></li><li><a href="global.html#openPercentage">openPercentage</a></li><li><a href="global.html#pop">pop</a></li><li><a href="global.html#preventDefault">preventDefault</a></li><li><a href="global.html#push">push</a></li><li><a href="global.html#ready">ready</a></li><li><a href="global.html#register">register</a></li><li><a href="global.html#scrollBy">scrollBy</a></li><li><a href="global.html#scrollTo">scrollTo</a></li><li><a href="global.html#scrollTop">scrollTop</a></li><li><a href="global.html#setContent">setContent</a></li><li><a href="global.html#setDimensions">setDimensions</a></li><li><a href="global.html#setPosition">setPosition</a></li><li><a href="global.html#setSnapSize">setSnapSize</a></li><li><a href="global.html#show">show</a></li><li><a href="global.html#showNavBar">showNavBar</a></li><li><a href="global.html#snapToRest">snapToRest</a></li><li><a href="global.html#stopDetect">stopDetect</a></li><li><a href="global.html#stopPropagation">stopPropagation</a></li><li><a href="global.html#stopRefreshing">stopRefreshing</a></li><li><a href="global.html#toggleLeft">toggleLeft</a></li><li><a href="global.html#toggleRight">toggleRight</a></li><li><a href="global.html#triggerPullToRefresh">triggerPullToRefresh</a></li><li><a href="global.html#update">update</a></li><li><a href="global.html#zoomBy">zoomBy</a></li><li><a href="global.html#zoomTo">zoomTo</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha3</a> on Wed Jan 22 2014 14:46:04 GMT-0600 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
